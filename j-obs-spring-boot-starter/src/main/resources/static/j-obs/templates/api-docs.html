<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J-Obs - API Documentation</title>
    <link rel="icon" type="image/svg+xml" href="{{BASE_PATH}}/static/j-obs/favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.13.3/dist/cdn.min.js" defer></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: {} }
        };
        (function() {
            const saved = localStorage.getItem('j-obs-theme');
            if (saved === 'light') {
                document.documentElement.classList.add('light');
                document.documentElement.classList.remove('dark');
            } else if (saved === 'dark' || window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                document.documentElement.classList.remove('light');
            } else {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
    <style>
        .gradient-text { color: #a78bfa; }
        .nav-link {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        .nav-link:hover::after { width: 80%; }
        .nav-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        /* Light mode overrides */
        html.light body { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); color: #1e293b; }
        html.light .bg-slate-950 { background-color: #f8fafc; }
        html.light .bg-slate-900 { background-color: #f1f5f9; }
        html.light .bg-slate-800\/50 { background-color: rgba(226, 232, 240, 0.8); }
        html.light .text-gray-100 { color: #1e293b; }
        html.light .text-slate-300 { color: #475569; }
        html.light .text-slate-400 { color: #64748b; }
        html.light .text-slate-500 { color: #94a3b8; }
        html.light .border-slate-700 { border-color: #cbd5e1; }

        /* Swagger iframe styling */
        .swagger-frame {
            width: 100%;
            height: calc(100vh - 180px);
            min-height: 600px;
            border: none;
            border-radius: 12px;
            background: white;
        }

        /* Tab styling */
        .api-tab {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
        }
        .api-tab:hover {
            background: rgba(99, 102, 241, 0.1);
        }
        .api-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
    </style>
</head>
<body class="bg-slate-950 text-gray-100 min-h-screen">
    <!-- Background gradient -->
    <div class="fixed inset-0 bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950 -z-10"></div>
    <div class="fixed inset-0 -z-10 opacity-30">
        <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#grid)"/>
        </svg>
    </div>

    <div class="min-h-screen p-6">
        <div class="max-w-[1600px] mx-auto">
            <!-- Header -->
            <header class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <a href="{{BASE_PATH}}" class="text-2xl font-bold gradient-text hover:opacity-80 transition-opacity">J-Obs</a>
                    <div class="flex items-center gap-2 text-sm text-slate-400">
                        <span class="w-2 h-2 rounded-full bg-green-500 pulse-dot"></span>
                        <span>Live</span>
                    </div>
                </div>
                <nav class="flex flex-wrap gap-1 p-1 bg-slate-800/50 rounded-xl backdrop-blur-sm">
                    <a href="{{BASE_PATH}}" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700/50">Overview</a>
                    <a href="{{BASE_PATH}}/logs" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700/50">Logs</a>
                    <a href="{{BASE_PATH}}/traces" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700/50">Traces</a>
                    <a href="{{BASE_PATH}}/metrics" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700/50">Metrics</a>
                    <a href="{{BASE_PATH}}/health" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700/50">Health</a>
                    <a href="{{BASE_PATH}}/alerts" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700/50">Alerts</a>
                    <a href="{{BASE_PATH}}/tools" class="nav-link px-4 py-2 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700/50">Tools</a>
                    <span class="nav-active px-4 py-2 rounded-lg text-sm font-medium text-white">API Docs</span>
                </nav>
                <!-- Theme toggle -->
                <button
                    x-data="{ dark: document.documentElement.classList.contains('dark') }"
                    @click="dark = !dark; document.documentElement.classList.toggle('dark'); document.documentElement.classList.toggle('light'); localStorage.setItem('j-obs-theme', dark ? 'dark' : 'light')"
                    class="p-2 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 transition-colors"
                    title="Toggle theme"
                >
                    <svg x-show="dark" class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                    </svg>
                    <svg x-show="!dark" class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                    </svg>
                </button>
            </header>

            <!-- Main Content -->
            <main x-data="{ activeTab: 'j-obs' }">
                <!-- Title and description -->
                <div class="mb-6">
                    <h1 class="text-2xl font-bold text-white mb-2">API Documentation</h1>
                    <p class="text-slate-400">Interactive API documentation powered by Swagger UI. Explore and test all available endpoints.</p>
                </div>

                <!-- API Group Tabs -->
                <div class="flex gap-2 mb-4 p-1 bg-slate-800/50 rounded-xl backdrop-blur-sm w-fit">
                    <button
                        class="api-tab"
                        :class="{ 'active': activeTab === 'j-obs' }"
                        @click="activeTab = 'j-obs'"
                    >
                        <span class="flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                            </svg>
                            J-Obs Observability
                        </span>
                    </button>
                    <button
                        class="api-tab"
                        :class="{ 'active': activeTab === 'application' }"
                        @click="activeTab = 'application'"
                    >
                        <span class="flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                            </svg>
                            Application API
                        </span>
                    </button>
                    <a
                        href="/swagger-ui/index.html"
                        target="_blank"
                        class="api-tab text-slate-400 hover:text-white"
                        title="Open in new tab"
                    >
                        <span class="flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                            </svg>
                            Open Full View
                        </span>
                    </a>
                </div>

                <!-- Swagger UI iframe -->
                <div class="rounded-xl overflow-hidden shadow-2xl border border-slate-700/50">
                    <iframe
                        x-show="activeTab === 'j-obs'"
                        src="/swagger-ui/index.html?urls.primaryName=J-Obs%20Observability%20API"
                        class="swagger-frame"
                        title="J-Obs API Documentation"
                    ></iframe>
                    <iframe
                        x-show="activeTab === 'application'"
                        src="/swagger-ui/index.html?urls.primaryName=Application%20API"
                        class="swagger-frame"
                        title="Application API Documentation"
                    ></iframe>
                </div>

                <!-- Quick links -->
                <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <a href="/v3/api-docs/j-obs" target="_blank" class="p-4 bg-slate-800/50 rounded-xl border border-slate-700/50 hover:border-indigo-500/50 transition-colors group">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-indigo-500/20 rounded-lg">
                                <svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-medium text-white group-hover:text-indigo-400 transition-colors">J-Obs OpenAPI Spec</h3>
                                <p class="text-sm text-slate-400">/v3/api-docs/j-obs</p>
                            </div>
                        </div>
                    </a>
                    <a href="/v3/api-docs/application" target="_blank" class="p-4 bg-slate-800/50 rounded-xl border border-slate-700/50 hover:border-indigo-500/50 transition-colors group">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-green-500/20 rounded-lg">
                                <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-medium text-white group-hover:text-green-400 transition-colors">Application OpenAPI Spec</h3>
                                <p class="text-sm text-slate-400">/v3/api-docs/application</p>
                            </div>
                        </div>
                    </a>
                    <a href="/v3/api-docs" target="_blank" class="p-4 bg-slate-800/50 rounded-xl border border-slate-700/50 hover:border-indigo-500/50 transition-colors group">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-purple-500/20 rounded-lg">
                                <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-medium text-white group-hover:text-purple-400 transition-colors">Combined OpenAPI Spec</h3>
                                <p class="text-sm text-slate-400">/v3/api-docs</p>
                            </div>
                        </div>
                    </a>
                </div>
            </main>

            <!-- Footer -->
            <footer class="mt-8 text-center">
                <div class="flex items-center justify-center gap-2 text-slate-500 text-sm">
                    <span class="gradient-text font-semibold">J-Obs</span>
                    <span>-</span>
                    <span>Java Observability Library</span>
                </div>
            </footer>
        </div>
    </div>
</body>
</html>
